<div class="flex flex-col">
  <div class="w-full">
    <!-- <div class="flex flex-col space-y-2">
      <label for="newSceneInput" class="font-medium text-gray-700"
        >Add New Scene</label
      >
      <textarea
        id="newSceneInput"
        rows="3"
        [(ngModel)]="pasteScenes"
        class="w-full px-3 py-2 text-gray-700 placeholder-gray-400 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:placeholder-gray-500 sm:text-sm"
      ></textarea>

      <button
        (click)="addPastedScenes(pasteScenes)"
        class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
      >
        Paste Scenes
      </button>
    </div> -->
    <hr />
    <div class="flex flex-col">
      <div class="w-full mx-auto my-4 justify-center">
        <!-- <div class="flex flex-col space-y-2">
          <form
            class="flex space-x-4 py-8 ml-8"
            (ngSubmit)="createScene(newScene)"
            #form="ngForm"
          >
            <input
              type="text"
              [(ngModel)]="newScene.time"
              name="time"
              placeholder="Time"
              class="border rounded"
            />
            <input
              type="text"
              [(ngModel)]="newScene.original_text"
              name="name"
              placeholder="Name"
              class="border rounded"
            />
            <input
              type="text"
              [(ngModel)]="newScene.prompt"
              name="prompt"
              placeholder="Prompt"
              class="border rounded"
            />
            <input
              type="text"
              [(ngModel)]="newScene.img"
              name="img"
              placeholder="Image URL"
              class="border rounded"
            />
            <button
              type="submit"
              class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
            >
              Add Scene
            </button>
          </form>
        </div> -->
      </div>
    </div>
  </div>
  <table class="min-w-full divide-y divide-gray-200 mt-4">
    <thead class="bg-gray-50">
      <tr>
        <th
          class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
        >
          Time
        </th>
        <th
          class="px-6 py-3 text-left text-xs font-medium text-yellow-500 uppercase tracking-wider"
        >
          Original_text
        </th>
        <th
          class="px-6 py-3 text-left text-xs font-medium text-yellow-700 uppercase tracking-wider"
        >
          Prompt
        </th>
        <th
          class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
        >
          Image
        </th>
        <!-- <th
          class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
        >
          Actions
        </th> -->
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200">
      <ng-container *ngIf="scenes$ | async as scenes">
        <tr *ngFor="let scene of scenes">
          <td class="px-6 py-4 whitespace-nowrap">{{ scene.time }}</td>
          <td class="px-6 py-4 whitespace-nowrap">
            <textarea>{{ scene.original_text }}</textarea>
            <b
              >{{ scene.original_text.length }} ca.
              {{ 0.066 * scene.original_text.length }} sec</b
            >
          </td>

          <td class="px-6 py-4 whitespace-nowrap">
            <textarea name="" id="" cols="30" rows="10">{{
              scene.prompt
            }}</textarea>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <!-- <img
              [src]="scene.prompt.split('--v')[0]"
              alt="Scene Image"
              class="w-16 h-16 object-cover"
            /> -->
            <button
              (click)="copyPrompt(scene.prompt)"
              class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
            >
              {{ scene.prompt | slice : 0 : 5 }}
            </button>
          </td>
          <!-- <td class="px-6 py-4 whitespace-nowrap">
            <button
              (click)="scene.id && deleteScene(scene.id)"
              class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"
            >
              Delete
            </button>
          </td>
          <td
            class="px-6 py-4 whitespace-nowrap"
            *ngIf="scene.id === editableSceneId"
          >
            <input
              type="text"
              [(ngModel)]="editableScene.original_text"
              class="w-full border border-blue-500"
            />
          </td>
          <td
            class="px-6 py-4 whitespace-nowrap"
            *ngIf="scene.id === editableSceneId"
          >
            <input
              type="text"
              class="w-full border border-blue-500"
              [(ngModel)]="editableScene.prompt"
            />
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <button
              (click)="editScene(scene)"
              *ngIf="scene.id !== editableSceneId"
              class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded"
            >
              Edit
            </button>
            <button
              (click)="updateScene(scene.id, editableScene)"
              *ngIf="scene.id === editableSceneId"
              class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"
            >
              Save
            </button>
            <button
              (click)="cancelEdit()"
              *ngIf="scene.id === editableSceneId"
              class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"
            >
              Cancel
            </button>
          </td> -->
        </tr>
      </ng-container>

      <!-- Edit scene modal -->
      <!-- <ng-template #editSceneModal let-modal>
        <div class="modal-body">
          <form (ngSubmit)="updateScene(modal.id, editableScene)">
            <div class="form-group">
              <label for="editSceneName">Name</label>
              <input
                type="text"
                [(ngModel)]="editableScene.original_text"
                name="name"
                id="editSceneName"
                class="form-control"
              />
            </div>
            <div class="form-group">
              <label for="editScenePrompt">Prompt</label>
              <textarea
                [(ngModel)]="editableScene.prompt"
                name="prompt"
                id="editScenePrompt"
                class="form-control"
              ></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Save</button>
          </form>
        </div>
      </ng-template> -->
    </tbody>
  </table>
</div>
